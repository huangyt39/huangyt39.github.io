<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Blogs of learning CS">
<meta property="og:type" content="website">
<meta property="og:title" content="MyBlog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="MyBlog">
<meta property="og:description" content="Blogs of learning CS">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MyBlog">
<meta name="twitter:description" content="Blogs of learning CS">

<link rel="canonical" href="http://yoursite.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>MyBlog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MyBlog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/10/计网总结（四）：网络层/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="huangyt">
      <meta itemprop="description" content="Blogs of learning CS">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MyBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/10/计网总结（四）：网络层/" class="post-title-link" itemprop="url">计网总结（四）：网络层</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-01-10 22:43:16" itemprop="dateCreated datePublished" datetime="2019-01-10T22:43:16+08:00">2019-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-19 16:42:15" itemprop="dateModified" datetime="2020-07-19T16:42:15+08:00">2020-07-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><h4 id="网络层的主要功能"><a href="#网络层的主要功能" class="headerlink" title="网络层的主要功能"></a>网络层的主要功能</h4><ul>
<li>转发：将分组从一个输入链路接口转移到适当的输出链路接口的路由器本地操作</li>
<li>选路：分组从源到目的地时，决定端到端路径的网络范围</li>
</ul>
<h4 id="分组交换机"><a href="#分组交换机" class="headerlink" title="分组交换机"></a>分组交换机</h4><ul>
<li>交换机：基于链路层字段中的值作转发决定</li>
<li>路由器：基于网络层字段中的值作转发决定</li>
</ul>
<p>网络层提供尽力而为服务</p>
<h3 id="虚拟电路和数据报"><a href="#虚拟电路和数据报" class="headerlink" title="虚拟电路和数据报"></a>虚拟电路和数据报</h3><h4 id="主要区别"><a href="#主要区别" class="headerlink" title="主要区别"></a>主要区别</h4><p>网络层提供连接服务的网络：虚电路网络</p>
<p>网络层提供无连接服务的网络：数据报网络</p>
<h4 id="虚电路网络"><a href="#虚电路网络" class="headerlink" title="虚电路网络"></a>虚电路网络</h4><h5 id="虚电路的组成"><a href="#虚电路的组成" class="headerlink" title="虚电路的组成"></a>虚电路的组成</h5><p>源与目的主机之间的路径、VC号（沿着该路径每段链路一个号码）、沿着该路径每台路由器的转发表表项</p>
<p>该网络的路由器必须为进行中的连接维持连接状态信息，建立新连接时将新的连接项加入转发表中，释放时删除</p>
<h5 id="虚电路的阶段"><a href="#虚电路的阶段" class="headerlink" title="虚电路的阶段"></a>虚电路的阶段</h5><p>虚电路建立、数据传送、虚电路拆除</p>
<p>路由器之间传递的用于建立VC的报文称为信令报文，用来交换这些报文的协议成为信令协议</p>
<h4 id="数据报网络"><a href="#数据报网络" class="headerlink" title="数据报网络"></a>数据报网络</h4><p>最长前缀匹配原则</p>
<p>转发表由选路算法修改，1-5min更新一次</p>
<h3 id="路由器原理"><a href="#路由器原理" class="headerlink" title="路由器原理"></a>路由器原理</h3><h4 id="交换结构"><a href="#交换结构" class="headerlink" title="交换结构"></a>交换结构</h4><h5 id="交换技术"><a href="#交换技术" class="headerlink" title="交换技术"></a>交换技术</h5><ul>
<li>经内存交换</li>
<li>经一根总线交换</li>
<li>经一个互联网络交换</li>
</ul>
<p>经过总线比内存快：不需要经过路由处理器的干预</p>
<h4 id="输出端口"><a href="#输出端口" class="headerlink" title="输出端口"></a>输出端口</h4><p>交换结构-&gt;排队（缓存管理）-&gt;数据链路处理（协议、封装）-&gt;线路段接-&gt;</p>
<h4 id="排队"><a href="#排队" class="headerlink" title="排队"></a>排队</h4><p>输入输出端口若发生排队，必须有一个分组调度程序来选择下一个传送的分组：FCFS、加权公平排队（WFQ）…</p>
<p>缓存满时要弃尾或者删除一个已排队的分组</p>
<p>线路前部阻塞（HOL）：若输入端口排队中，之前的的分组被阻塞，则之后的分组也必须等待，即使其输出端口无竞争</p>
<h3 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h3><h4 id="数据报格式"><a href="#数据报格式" class="headerlink" title="数据报格式"></a>数据报格式</h4><ul>
<li><p>版本号：IPv4、IPv6</p>
</li>
<li><p>首部长度：存在可选项故需要首部长度，一般为20字节</p>
</li>
<li><p>服务类型</p>
</li>
<li><p>数据报长度（字节）：2字节，故数据报理论长度为65535字节</p>
</li>
<li><p>标识、标志、片偏移：IP分片相关</p>
</li>
<li><p>寿命TTL：保证数据报不会永远在网络中循环</p>
</li>
<li><p>上层协议</p>
</li>
<li><p>首部检验和</p>
<p>为什么传输层和网络层都差错检测？</p>
<ul>
<li>IP层对IP首部检验，TCP/UDP对整个TCP/UDP报文段进行</li>
<li>TCP/UDP与IP不一定是同一个协议栈</li>
</ul>
</li>
<li><p>源和目的IP地址</p>
</li>
<li><p>选项：很少使用</p>
</li>
</ul>
<h4 id="IP数据报分片"><a href="#IP数据报分片" class="headerlink" title="IP数据报分片"></a>IP数据报分片</h4><h5 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h5><p>链路层的最大传输单元（MTU）比以太网帧最大可承受的数据小</p>
<h5 id="IP片"><a href="#IP片" class="headerlink" title="IP片"></a>IP片</h5><ul>
<li>标识：说明属于同一数据包</li>
<li>偏移：每个offset表示8字节数据</li>
<li>标志：flag==1说明后面还有，flag==0说明是最后一片</li>
</ul>
<p>在目的地端系统，数据报在IP层完全重构为初始的IP数据报才会被交付给目的地传输层，数据报的重新组装工作在端系统中完成，而不是路由器</p>
<p>若不允许分片，则路由器收到过大的数据报会丢包</p>
<h4 id="子网"><a href="#子网" class="headerlink" title="子网"></a>子网</h4><p>分开主机和路由器的每个接口，产生的几个分离的网络岛，每个独立的网络都是一个子网</p>
<h4 id="无类别域间选路CIDR"><a href="#无类别域间选路CIDR" class="headerlink" title="无类别域间选路CIDR"></a>无类别域间选路CIDR</h4><p>因特网的地址分配策略：无类别域间选路</p>
<p>将32位地址划分为a.b.c.d/x，x为子网长度，该地址的x最高比特构成IP地址的网络部分，称为该地址的前缀</p>
<h4 id="分类编址"><a href="#分类编址" class="headerlink" title="分类编址"></a>分类编址</h4><p>8 16 24比特子网地址的网络成为A B C类网络</p>
<ul>
<li>A 10.0.0.0 - 10.255.255.255</li>
<li>B 172.16.0.0 - 172.31.255.255</li>
<li>C 192.168.0.0 - 192.168.255.255</li>
</ul>
<p>子网广播：子网.all 1</p>
<p>子网ID：子网.all 0</p>
<h4 id="动态主机配置协议DHCP"><a href="#动态主机配置协议DHCP" class="headerlink" title="动态主机配置协议DHCP"></a>动态主机配置协议DHCP</h4><p>为组织内的主机和路由器接口分配IP地址，还允许主机获取其他信息如其子网掩码、默认网关、DNS服务器地址</p>
<p>也称为即插即用协议</p>
<h5 id="DHCP步骤"><a href="#DHCP步骤" class="headerlink" title="DHCP步骤"></a>DHCP步骤</h5><ul>
<li>DHCP服务器发现：主机广播（255.255.255.255）DHCP发现报文，源地址为0.0.0.0</li>
<li>DHCP服务器提供：DHCP服务器用DHCP提供报文进行响应，用广播地址255.255.255.255</li>
<li>DHCP请求：客户机选择DHCP服务器（可能有多个），发送DHCP请求报文，广播，目的为通知其他用户</li>
<li>DHCPACK：服务器用DHCPACK对请求报文进行响应，广播，同理</li>
</ul>
<h5 id="不足"><a href="#不足" class="headerlink" title="不足"></a>不足</h5><p>在子网间移动时不能维持与远程应用间的连接</p>
<h4 id="网络地址转换NAT"><a href="#网络地址转换NAT" class="headerlink" title="网络地址转换NAT"></a>网络地址转换NAT</h4><h5 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h5><p>NAT路由器上维护NAT转换表，表项中包含了端口号和IP地址</p>
<p>e.g</p>
<table>
<thead>
<tr>
<th>WAN端</th>
<th>LAN端</th>
</tr>
</thead>
<tbody>
<tr>
<td>138.76.29.7,5001</td>
<td>10.0.0.1,3345</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<h5 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h5><p>违反端到端原则，妨碍P2P应用程序：P2P要求任何参与对等发A应该能够向任何其他参与向任何对等参与方B发起一个TCP连接</p>
<h5 id="NAT穿越"><a href="#NAT穿越" class="headerlink" title="NAT穿越"></a>NAT穿越</h5><p>对等方A通过一个中间对等方C与对等方B联系，对等方A能够经由对等方C请求对等方B，发起直接返回对等方A的一个TCP连接</p>
<h4 id="互联网控制报文协议ICMP"><a href="#互联网控制报文协议ICMP" class="headerlink" title="互联网控制报文协议ICMP"></a>互联网控制报文协议ICMP</h4><p>ICMP结构上位于IP之上，但通常被认为是IP的一部分</p>
<h5 id="TraceRoute"><a href="#TraceRoute" class="headerlink" title="TraceRoute"></a>TraceRoute</h5><p>向目的主机一次发送一系列IP数据报，均携带不可到达的UDP端口号的UDP报文，TTL依次增大。若不到达源主机，路由器丢弃该数据报，返回ICMP警告报文，包含路由器名字与IP地址，若到达，源主机从定时器得到往返时延和路由器名字与IP地址</p>
<p>如何知道何时停止：目的主机会向源主机发送一个端口不可到达的ICMP报文，收到时得知应停止</p>
<h5 id="ICMP报文类型"><a href="#ICMP报文类型" class="headerlink" title="ICMP报文类型"></a>ICMP报文类型</h5><p>p231 4-23</p>
<h4 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h4><h5 id="数据报格式与IPv4的不同"><a href="#数据报格式与IPv4的不同" class="headerlink" title="数据报格式与IPv4的不同"></a>数据报格式与IPv4的不同</h5><ul>
<li>去除检验和</li>
<li>支持选项但在下一个首部 字段中</li>
<li>地址扩容 32-&gt;128</li>
<li>舍弃许多IPv4的首部字段</li>
<li>流标签：用于标识一个数据报的流</li>
</ul>
<p>取消了分片功能、首部检验和，加快IP转发速度</p>
<h5 id="从IPv4向IPv6迁移"><a href="#从IPv4向IPv6迁移" class="headerlink" title="从IPv4向IPv6迁移"></a>从IPv4向IPv6迁移</h5><p>双栈 隧道 p235 p236</p>
<p>双栈：直接做转换，但是会丢失字段</p>
<p>隧道：将IPv4作为数据封装进IPv6</p>
<h3 id="选路算法"><a href="#选路算法" class="headerlink" title="选路算法"></a>选路算法</h3><p>源主机的默认路由器（第一跳路由器）：源路由器</p>
<p>目的主机的默认路由器：目的路由器</p>
<h4 id="选路算法的分类"><a href="#选路算法的分类" class="headerlink" title="选路算法的分类"></a>选路算法的分类</h4><ul>
<li>按全局性/分布式分类<ul>
<li>全局选路算法：链路状态算法（LS），必须知道每条链路的费用</li>
<li>分布式选路算法：距离向量算法（DV），每个节点得知与其直接相连链路的费用即可工作</li>
</ul>
</li>
<li>按静态动态分类：静态选路算法中，路由变化缓慢，动态算法周期性随拓扑或费用的变化运行</li>
<li>按负载敏感/迟钝分类：负载敏感算法中，链路费用动态变化，反应底层链路的拥塞水平，RIP、OSPF、BGP都是负载迟钝的</li>
</ul>
<h4 id="链路状态选路算法"><a href="#链路状态选路算法" class="headerlink" title="链路状态选路算法"></a>链路状态选路算法</h4><p>Dijkstra算法 p240</p>
<p>对于每个节点记录（距离，上一跳路由）</p>
<p>最坏情况：O(n2)</p>
<p>防止振荡：保证并非所有的路由器都同时运行LS算法，但会出现自同步，每台路由器随机发送链路通告的时间来避免自同步</p>
<h4 id="距离向量选路算法"><a href="#距离向量选路算法" class="headerlink" title="距离向量选路算法"></a>距离向量选路算法</h4><p>迭代、异步、分布式</p>
<p>dx(y) = min{c(x, v) + dv(y)}</p>
<p>每个节点维护下列选路数据</p>
<ul>
<li>直连每个邻居的费用c(x,y)</li>
<li>节点的距离向量：节点到N中所有目的地费用的估计值</li>
<li>节点每个邻居的距离向量</li>
</ul>
<p>每个节点不时向每个邻居发送它的距离向量，当节点收到来自邻居的距离向量时，保存并更新自己的距离向量</p>
<h5 id="毒性逆转"><a href="#毒性逆转" class="headerlink" title="毒性逆转"></a>毒性逆转</h5><p>DV可能导致选路环路，从而导致计数到无穷问题</p>
<p>解决：毒性逆转</p>
<p>若z通过y选路到达目的地x，则z通告y：z到x的距离为无穷大</p>
<p>但毒性逆转无法检测到3个或更多节点的环路</p>
<h4 id="LS与DV的比较"><a href="#LS与DV的比较" class="headerlink" title="LS与DV的比较"></a>LS与DV的比较</h4><ul>
<li>DV中，节点仅与它直接相连的邻居通信，告知对其他所有节点的链路费用；LS中，每个节点与其他所有节点通信，但仅告知直接相连的链路费用</li>
<li>报文复杂性：LS O(N*E)，DV仅在新联路费用导致与相连的节点最低费用路径改变时才传播改变的链路费用</li>
<li>收敛速度：LS O(N2)， DV收敛较慢</li>
<li>健壮性：LS中，每个节点仅计算自己的转发表，一定程度上是分离的；DV中一个不正确的节点计算值会扩散到整个网络</li>
</ul>
<h4 id="层次选路"><a href="#层次选路" class="headerlink" title="层次选路"></a>层次选路</h4><p>自治系统内部选路协议（RIP、OSPF）intra</p>
<ul>
<li>自治系统内部选路</li>
</ul>
<p>自治系统间选路协议（BGP） inter</p>
<ul>
<li>从相邻AS获取可达性信息</li>
<li>向该AS中所有路由传播可达性信息</li>
<li>转发表项（x，I）x为子网，I为从该路由器到网关路由器的位于最低费用路径上的路由器接口</li>
</ul>
<p>热土豆算法：选择具有最小的最低费用的网关</p>
<h4 id="在转发表中增加AS外目的地的步骤"><a href="#在转发表中增加AS外目的地的步骤" class="headerlink" title="在转发表中增加AS外目的地的步骤"></a>在转发表中增加AS外目的地的步骤</h4><ul>
<li>从AS间协议知道经多个网关可达子网x</li>
<li>使用来自AS内部协议的选路信息来决定每个网关的最低费用路径的费用</li>
<li>热土豆选路：选择具有最小的最低费用的网关</li>
<li>从转发表决定通向最低费用网关的接口I，将（x，I）项放入转发表中</li>
</ul>
<h3 id="因特网中的选路"><a href="#因特网中的选路" class="headerlink" title="因特网中的选路"></a>因特网中的选路</h3><h4 id="选路信息协议RIP"><a href="#选路信息协议RIP" class="headerlink" title="选路信息协议RIP"></a>选路信息协议RIP</h4><p>一种距离向量协议，用跳数作为其费用测度</p>
<p>用RIP响应报文交换选路更新信息，又称RIP通告</p>
<p>每台路由器维护一张称为选路表的RIP表：</p>
<table>
<thead>
<tr>
<th>目的子网</th>
<th>下一台路由器</th>
<th>到目的地的跳数</th>
</tr>
</thead>
<tbody>
<tr>
<td>w</td>
<td>A</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>设置最大跳数为15，防止环路</p>
<p>一旦超过180秒没有监听到其邻居，该邻居不再被认为是可达的，修改本地选路表，通告相邻邻居</p>
<p>RIP使用UDP来传递信息，可当做一个应用层进程</p>
<h4 id="开放最短路径优先OSPF"><a href="#开放最短路径优先OSPF" class="headerlink" title="开放最短路径优先OSPF"></a>开放最短路径优先OSPF</h4><p>一个使用洪泛链路状态信息的链路状态协议和一个Dijkstra最低费用路径算法</p>
<p>每当一条链路的状态发生变化，路由器广播链路状态信息</p>
<p>OSPF通告包含在OSPF报文中，OSPF报文直接承载在IP分组中</p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul>
<li>安全</li>
<li>允许多条相同费用的路径</li>
<li>对单播和多播选路的综合支持</li>
<li>支持单个选路域内的层次结构</li>
</ul>
<h5 id="层次结构的OSPF"><a href="#层次结构的OSPF" class="headerlink" title="层次结构的OSPF"></a>层次结构的OSPF</h5><p>4种OSPF路由器</p>
<ul>
<li>内部路由器：位于非主干区域且只执行AS内部选路</li>
<li>区域边界路由器：同时属于区域和主干两个区域</li>
<li>主干路由器：执行主干中的选路</li>
<li>边界路由器：与属于其他AS的路由器交换选路信息</li>
</ul>
<h4 id="边界网关协议BGP"><a href="#边界网关协议BGP" class="headerlink" title="边界网关协议BGP"></a>边界网关协议BGP</h4><h5 id="BGP基础"><a href="#BGP基础" class="headerlink" title="BGP基础"></a>BGP基础</h5><p>位于连接端点的两台路由器称为BGP对等方，沿着该连接发送所有BGP报文的TCP连接称为BGP会话</p>
<p>跨越两个AS的BGP会话称为外部BGP会话（eBGP），AS内部的BGP会话称为内部BGP会话（iBGP会话）</p>
<p>BGP中，目的地不是主机而是CDIR化的前缀</p>
<h5 id="路径属性和BGP路由"><a href="#路径属性和BGP路由" class="headerlink" title="路径属性和BGP路由"></a>路径属性和BGP路由</h5><p>一个AS有全局唯一的自治系统号（ASN）</p>
<p>重要的BGP属性</p>
<ul>
<li>AS-PATH：包含了前缀的通告已经通过的AS，若路由器看到自己的AS包含在AS-PATH中，拒绝该通告，防止循环通告</li>
<li>NEXT-HOP：一开始某AS-PATH的路由器接口</li>
</ul>
<p>网关路由器收到一个路由器通告时，它使用输入策略来决定是否接受或过滤改路由，是否设置某种属性</p>
<h5 id="BGP路由选择"><a href="#BGP路由选择" class="headerlink" title="BGP路由选择"></a>BGP路由选择</h5><p>按以下顺序消除直至留下一条路由：</p>
<ul>
<li>选最高本地偏好值（设定或从另一路由学习到）</li>
<li>选最短AS-PATH的路由</li>
<li>选最靠近NEXT-HOP路由器的路由（热土豆选路）</li>
<li>用BGP标识符来选择路由</li>
</ul>
<h5 id="选路策略"><a href="#选路策略" class="headerlink" title="选路策略"></a>选路策略</h5><p>任何穿越某ISP主干网的流量必须是源或目的地位于该ISP的某个客户网络，否则这些流量将会搭便车</p>
<h3 id="广播和组播"><a href="#广播和组播" class="headerlink" title="广播和组播"></a>广播和组播</h3><h4 id="洪泛"><a href="#洪泛" class="headerlink" title="洪泛"></a>洪泛</h4><p>节点向其所有邻居发送该分组的拷贝</p>
<p>若无控制，会出现广播风暴</p>
<h5 id="受控洪泛的方法"><a href="#受控洪泛的方法" class="headerlink" title="受控洪泛的方法"></a>受控洪泛的方法</h5><ul>
<li>源节点将其地址和广播序号加入广播分组再发送，接受时检查该分组是否在列表中，在则丢弃；不在则向除来源外的邻居转发</li>
<li>反向路径转发（反向路径广播）：当一台路由器接收到具有给定源地址的广播分组时，仅当该分组到的的链路正好是位于自己到其源的最短单播路径上，才向其他出链路转发分组</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/10/计网总结（三）：传输层/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="huangyt">
      <meta itemprop="description" content="Blogs of learning CS">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MyBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/10/计网总结（三）：传输层/" class="post-title-link" itemprop="url">计网总结（三）：传输层</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-01-10 22:38:33" itemprop="dateCreated datePublished" datetime="2019-01-10T22:38:33+08:00">2019-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-19 16:42:15" itemprop="dateModified" datetime="2020-07-19T16:42:15+08:00">2020-07-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><h3 id="多路复用和多路分解"><a href="#多路复用和多路分解" class="headerlink" title="多路复用和多路分解"></a>多路复用和多路分解</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><ul>
<li>多路复用：从源主机不同套接字中收集数据块，并为每个数据块封装首部信息从而生成报文段，将报文段传递到网络层</li>
<li>多路分解：将传输层报文段中的数据交付到正确的套接字</li>
<li>指定要交付的套接字的字段：源端口号和目的端口号</li>
</ul>
<h4 id="Socket的共用"><a href="#Socket的共用" class="headerlink" title="Socket的共用"></a>Socket的共用</h4><p>若两个UDP报文段有不同的源IP地址和源端口号，但有相同的IP地址和目的端口号，则通过相同的套接字定向到相同的目的进程；TCP中，两个有不同源IP地址或源端口号的TCP报文段会被定向到两个不同的套接字</p>
<p>TCP套接字由（源IP地址、源端口号、目的IP地址、目的端口号）来标识</p>
<h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>无连接、不可靠</p>
<h4 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h4><ul>
<li>应用层能更好地控制要发送的数据和发送时间</li>
<li>无需建立连接</li>
<li>无连接状态</li>
<li>分组首部开销小</li>
</ul>
<h4 id="报文段结构"><a href="#报文段结构" class="headerlink" title="报文段结构"></a>报文段结构</h4><ul>
<li>首部：源端口号、目的端口号、长度、检验和</li>
<li>应用数据</li>
</ul>
<h4 id="UDP检验和"><a href="#UDP检验和" class="headerlink" title="UDP检验和"></a>UDP检验和</h4><p>发送方对<strong>报文段中所有</strong>16比特字的和进行反码运算，接收方一起相加，若无差错则和全为1</p>
<h3 id="可靠传输"><a href="#可靠传输" class="headerlink" title="可靠传输"></a>可靠传输</h3><p>模型 p137 3-8</p>
<h4 id="构造可靠数据传输协议"><a href="#构造可靠数据传输协议" class="headerlink" title="构造可靠数据传输协议"></a>构造可靠数据传输协议</h4><p>p137-144</p>
<ol>
<li>rdt1.0：完全可靠信道上的传输</li>
<li>rdt2.0：加入差错检测、接收方反馈和重传 引入序号</li>
<li>rdt3.0：有比特交替协议 倒计数定时器</li>
</ol>
<h4 id="流水线"><a href="#流水线" class="headerlink" title="流水线"></a>流水线</h4><p>p146 3-18</p>
<ul>
<li>必须增加序号范围</li>
<li>协议的发送方和接收方必须缓存多个分组</li>
</ul>
<h5 id="解决流水线差错"><a href="#解决流水线差错" class="headerlink" title="解决流水线差错"></a>解决流水线差错</h5><p>回退N步（GBN，滑动窗口协议）p147</p>
<p>选择重传（SR）p150</p>
<p>选择重传中，每个分组必须拥有自己的逻辑定时器，接收方和发送方的窗口总是不一致</p>
<h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><p>面向连接、可靠、全双工</p>
<p>首部长度字段指示32比特字为单位的TCP首部长度</p>
<p>报文段的序号是报文段首字节的字节流编号，故TCP传输的最大文件的大小：2^32</p>
<p>从开始建立连接到收到一次发送的数据的总时间：2RTT，三次握手+一次数据传输</p>
<h4 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h4><p><img src="/2019/01/10/计网总结（三）：传输层/TCP3.png" alt></p>
<h4 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h4><p><img src="/2019/01/10/计网总结（三）：传输层/TCP4.jpg" alt></p>
<h4 id="为什么TCP握手不是两次或四次"><a href="#为什么TCP握手不是两次或四次" class="headerlink" title="为什么TCP握手不是两次或四次"></a>为什么TCP握手不是两次或四次</h4><p>三次握手分别作用：</p>
<ul>
<li>第一次握手后，S可以确认自己收报文与C发报文的功能都正常，而C呢，它什么都不能确认。</li>
<li>第二次握手后，C可以确认自己的收发报文与S的收发报文功能都正常，也就是认为连接已建立。</li>
<li>那么第三次呢，S也可以确认双方能够正常通信。</li>
</ul>
<p>两次：防止失效的连接请求报文段被服务端接收，从而产生错误</p>
<p>如果不进行第三次握手，所以在S对C的请求进行回应(第二次握手)后，就会理所当然的认为连接已建立，而如果C并没有收到S的回应呢？此时，C仍认为连接未建立，S会对已建立的连接保存必要的资源，如果大量的这种情况，S会崩溃。 </p>
<p>四次：冗余</p>
<h4 id="Time-wait原因"><a href="#Time-wait原因" class="headerlink" title="Time-wait原因"></a>Time-wait原因</h4><ul>
<li>为了保证客户端发送的最后1个连接释放确认报文能到达服务器，从而使得服务器能正常释放连接</li>
<li>防止上文提到的早已失效的连接请求报文出现在本连接中<br>客户端发送了最后1个连接释放请求确认报文后，再经过2<code>MSL</code>时间，则可使本连接持续时间内所产生的所有报文段都从网络中消失，即在下1个新的连接中就不会出现早已失效的连接请求报文</li>
</ul>
<h4 id="流量控制和拥塞控制的目的"><a href="#流量控制和拥塞控制的目的" class="headerlink" title="流量控制和拥塞控制的目的"></a>流量控制和拥塞控制的目的</h4><p>流量控制：消除发送方使接收方缓存溢出的可能性</p>
<p>拥塞控制：减少因为网络的拥塞而丢包的可能性</p>
<h3 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h3><p><img src="/2019/01/10/计网总结（三）：传输层/TCP拥塞控制过程.jpg" alt="TCP拥塞控制过程"></p>
<p><img src="/2019/01/10/计网总结（三）：传输层/TCP拥塞控制状态转移.jpg" alt></p>
<ul>
<li>慢启动：cwnd = 1，每一个传输的报文确认后，cwnd+=1（速率指数增长）</li>
<li>拥塞避免：加性增，每过一个RTT，cwnd+=1（速率线性增长）</li>
<li>快速恢复：ssthresh = cwnd/2，cwnd = sstresh</li>
</ul>
<h4 id="TCP快速重传为什么是三次冗余ACK："><a href="#TCP快速重传为什么是三次冗余ACK：" class="headerlink" title="TCP快速重传为什么是三次冗余ACK："></a>TCP快速重传为什么是三次冗余ACK：</h4><p>两次duplicated ACK时很可能是乱序造成的，三次duplicated ACK时很可能是丢包造成的，四次duplicated ACK更更更可能是丢包造成的，但是这样的响应策略太慢。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/10/计网总结（二）：应用层/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="huangyt">
      <meta itemprop="description" content="Blogs of learning CS">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MyBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/10/计网总结（二）：应用层/" class="post-title-link" itemprop="url">计网总结（二）：应用层</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-01-10 22:35:56" itemprop="dateCreated datePublished" datetime="2019-01-10T22:35:56+08:00">2019-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-19 16:42:15" itemprop="dateModified" datetime="2020-07-19T16:42:15+08:00">2020-07-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><h3 id="应用层协议原理"><a href="#应用层协议原理" class="headerlink" title="应用层协议原理"></a>应用层协议原理</h3><h4 id="应用层程序体系结构"><a href="#应用层程序体系结构" class="headerlink" title="应用层程序体系结构"></a>应用层程序体系结构</h4><p>客户机/服务器体系结构：Web、FTP、Telent、e-mail</p>
<p>P2P体系结构：电话、文件分发、PTV</p>
<p>发起通信的进程为客户机，会话开始时等待联系的进程为服务器</p>
<h4 id="套接字"><a href="#套接字" class="headerlink" title="套接字"></a>套接字</h4><p>应用程序通过套接字收发报文，套接字是应用程序进程和传输层协议之间的接口</p>
<h4 id="支持应用的传输层协议"><a href="#支持应用的传输层协议" class="headerlink" title="支持应用的传输层协议"></a>支持应用的传输层协议</h4><table>
<thead>
<tr>
<th>应用</th>
<th>应用层协议</th>
<th>传输层协议</th>
</tr>
</thead>
<tbody>
<tr>
<td>邮件</td>
<td>SMTP</td>
<td>TCP</td>
</tr>
<tr>
<td>远程终端访问</td>
<td>Telent</td>
<td>TCP</td>
</tr>
<tr>
<td>Web</td>
<td>HTTP</td>
<td>TCP</td>
</tr>
<tr>
<td>文件传输</td>
<td>FTP</td>
<td>TCP</td>
</tr>
<tr>
<td>流媒体</td>
<td>HTTP、RTP</td>
<td>TCP或UDP</td>
</tr>
<tr>
<td>因特网电话</td>
<td>SIP、RTP</td>
<td>UDP</td>
</tr>
<tr>
<td>目录服务</td>
<td>DNS</td>
<td>UDP</td>
</tr>
</tbody>
</table>
<h4 id="进程寻址"><a href="#进程寻址" class="headerlink" title="进程寻址"></a>进程寻址</h4><p>识别接受进程需要的信息</p>
<ul>
<li>主机的名称或地址：ip地址</li>
<li>用来指定目的主机上接受进程的标识：端口号</li>
</ul>
<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p>超文本传输协议</p>
<p>HTTP是无状态协议：不保存关于用户机的任何信息</p>
<h4 id="报文结构"><a href="#报文结构" class="headerlink" title="报文结构"></a>报文结构</h4><h5 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h5><p><img src="计网总结（二）：应用层/httprq.png" alt></p>
<h5 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h5><p><img src="计网总结（二）：应用层/httprp.png" alt></p>
<h4 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h4><table>
<thead>
<tr>
<th></th>
<th>类别</th>
<th>原因短语</th>
</tr>
</thead>
<tbody>
<tr>
<td>1XX</td>
<td>Informational（信息性状态码）</td>
<td>接收的请求正在处理</td>
</tr>
<tr>
<td>2XX</td>
<td>Success（成功状态码）</td>
<td>请求正常处理完毕</td>
</tr>
<tr>
<td>3XX</td>
<td>Redirection（重定向状态码）</td>
<td>需要进行附加操作以完成请求</td>
</tr>
<tr>
<td>4XX</td>
<td>Client Error（客户端错误状态码）</td>
<td>服务器无法处理请求</td>
</tr>
<tr>
<td>5XX</td>
<td>Server Error（服务器错误状态码）</td>
<td>服务器处理请求出错</td>
</tr>
</tbody>
</table>
<h4 id="Cookie和Session的区别"><a href="#Cookie和Session的区别" class="headerlink" title="Cookie和Session的区别"></a>Cookie和Session的区别</h4><p>Cookie和session都是用来跟踪浏览器用户身份的会话方式</p>
<p>Session是在服务端保存的一个数据结构，用来跟踪用户的状态，这个数据可以保存在集群、数据库、文件中；<br>Cookie是客户端保存用户信息的一种机制，用来记录用户的一些信息，也是实现Session的一种方式。</p>
<h4 id="Web缓存"><a href="#Web缓存" class="headerlink" title="Web缓存"></a>Web缓存</h4><p>Web缓存器也称代理服务器，有自己的磁盘存储空间，并在该存储空间中保存最近请求过的对象的拷贝</p>
<p>p70 2-11</p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul>
<li>可以减少对客户机请求的相应时间</li>
<li>可以减少一个机构内部网与因特网接入链路上的通信量</li>
</ul>
<h4 id="条件GET方法"><a href="#条件GET方法" class="headerlink" title="条件GET方法"></a>条件GET方法</h4><h4 id="持久与非持久HTTP"><a href="#持久与非持久HTTP" class="headerlink" title="持久与非持久HTTP"></a>持久与非持久HTTP</h4><ul>
<li>持久HTTP：连接持续期间，C-S经由一个服务器套接字交换HTTP报文</li>
<li>非持久HTTP：对每一对请求/响应，都有一个新的TCP连接被创建，完成后即关闭</li>
</ul>
<p>HTTP详见<a href="https://www.jianshu.com/p/a6d086a3997d" target="_blank" rel="noopener">https://www.jianshu.com/p/a6d086a3997d</a></p>
<h3 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h3><p>FTP使用两个并行的TCP连接来传输文件，一个是控制连接（21端口）一个是数据连接（20端口）</p>
<p>控制连接贯穿了整个用户会话期间，但是会话中的每一次文件传输都需要建立一个新的数据连接</p>
<p>FTP使用分离的控制连接，故FTP的控制信息是带外的</p>
<p>FTP命令与回答用ASCII格式在控制连接上传送</p>
<h3 id="邮件传输协议"><a href="#邮件传输协议" class="headerlink" title="邮件传输协议"></a>邮件传输协议</h3><h4 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h4><p>p76 2-16</p>
<p>邮件服务器之间使用SMTP传送邮件</p>
<p>SMTP一般不用中间邮件服务器发送文件（两端直连）</p>
<p>邮件报文的主体部分职能用7位ASCII码表示，在传送邮件之前和之后需要编码和解码</p>
<h5 id="与HTTP的区别"><a href="#与HTTP的区别" class="headerlink" title="与HTTP的区别"></a>与HTTP的区别</h5><ul>
<li>拉协议vs推协议</li>
<li>SMTP要求7位ASCII码</li>
<li>HTTP用带内控制，FTP用带外控制</li>
</ul>
<h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><h4 id="DNS组成"><a href="#DNS组成" class="headerlink" title="DNS组成"></a>DNS组成</h4><ul>
<li>分层的DNS服务器实现的分布式数据库</li>
<li>允许主机查询数据库的应用层协议</li>
</ul>
<h4 id="DNS服务器的层次结构"><a href="#DNS服务器的层次结构" class="headerlink" title="DNS服务器的层次结构"></a>DNS服务器的层次结构</h4><p>根DNS服务器-&gt;顶级域服务器（TLD）-&gt;权威DNS服务器-&gt;本地DNS服务器</p>
<p>p89 2-21</p>
<p>DNS缓存：当DNS服务器接收到一个DNS回答时会将其缓存</p>
<h4 id="使用UDP协议的原因："><a href="#使用UDP协议的原因：" class="headerlink" title="使用UDP协议的原因："></a>使用UDP协议的原因：</h4><p>客户端向DNS服务器查询域名，一般返回的内容都不超过512字节，用UDP传输即可。不用经过TCP三次握手，这样DNS服务器负载更低，响应更快。虽然从理论上说，客户端也可以指定向DNS服务器查询的时候使用TCP，但事实上，很多DNS服务器进行配置的时候，仅支持UDP查询包</p>
<h4 id="资源记录"><a href="#资源记录" class="headerlink" title="资源记录"></a>资源记录</h4><p>提供主机名到IP地址的映射</p>
<p>（Name，Value，Type，TTL）</p>
<p>TTL：记录的生存时间（资源应从缓存中删除的时间）</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>IP地址</td>
</tr>
<tr>
<td>NS</td>
<td>权威DNS服务器的主机名</td>
</tr>
<tr>
<td>CNAME</td>
<td>别名为Name的主机对应的规范主机名</td>
</tr>
<tr>
<td>MX</td>
<td>别名为Name的邮件服务器的规范主机名</td>
</tr>
</tbody>
</table>
<h4 id="DNS报文"><a href="#DNS报文" class="headerlink" title="DNS报文"></a>DNS报文</h4><p>p91 2-23</p>
<h3 id="P2P应用"><a href="#P2P应用" class="headerlink" title="P2P应用"></a>P2P应用</h3><p>C-S体系结构的缺点：分发时间由NF/u决定，随着对等方的数量N线性地增加</p>
<h3 id="socket编程"><a href="#socket编程" class="headerlink" title="socket编程"></a>socket编程</h3><h4 id="TCP的socket编程"><a href="#TCP的socket编程" class="headerlink" title="TCP的socket编程"></a>TCP的socket编程</h4><p><img src="/2019/01/10/计网总结（二）：应用层/socket.png" alt></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/10/计网总结（一）：计算机网络与因特网/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="huangyt">
      <meta itemprop="description" content="Blogs of learning CS">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MyBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/10/计网总结（一）：计算机网络与因特网/" class="post-title-link" itemprop="url">计网总结（一）：计算机网络与因特网</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-01-10 22:34:28" itemprop="dateCreated datePublished" datetime="2019-01-10T22:34:28+08:00">2019-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-19 16:42:15" itemprop="dateModified" datetime="2020-07-19T16:42:15+08:00">2020-07-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="因特网"><a href="#因特网" class="headerlink" title="因特网"></a>因特网</h2><h4 id="TCP-IP协议栈"><a href="#TCP-IP协议栈" class="headerlink" title="TCP/IP协议栈"></a>TCP/IP协议栈</h4><p>传输层：应用程序端点（进程）之间传送报文段</p>
<p>网络层：主机之间传送数据报</p>
<p>链路层：相邻的网络元素之间传送帧</p>
<p>物理层：节点之间传送比特</p>
<table>
<thead>
<tr>
<th>层次</th>
<th>信息分组</th>
<th>协议</th>
<th>端口</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用层</td>
<td>报文</td>
<td>HTTP、SMTP、FTP、DNS</td>
<td>应用程序</td>
</tr>
<tr>
<td>传输层</td>
<td>报文段</td>
<td>TCP、UDP</td>
<td>进程</td>
</tr>
<tr>
<td>网络层</td>
<td>数据报</td>
<td>IP、RIP、OSPF、BGP</td>
<td>主机</td>
</tr>
<tr>
<td>数据链路层</td>
<td>帧</td>
<td>以太网、WiFi、PPP</td>
<td>节点</td>
</tr>
<tr>
<td>物理层</td>
<td>比特</td>
<td></td>
<td>网络元素</td>
</tr>
</tbody>
</table>
<h4 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h4><p>一个协议定义了在两个或多个通信实体之间交换的报文格式和次序，以及在报文传输和接受或其他时间方面采取的动作</p>
<h4 id="接入网"><a href="#接入网" class="headerlink" title="接入网"></a>接入网</h4><p>将端系统连接到其边缘路由器的物理链路</p>
<h4 id="电路交换和分组交换"><a href="#电路交换和分组交换" class="headerlink" title="电路交换和分组交换"></a>电路交换和分组交换</h4><p>通过网络链路和交换机移动数据的两种基本方法</p>
<h5 id="主要区别"><a href="#主要区别" class="headerlink" title="主要区别"></a>主要区别</h5><ul>
<li>电路交换为通信提供的资源在通信会话期间会被预留；分组交换中不会被预留</li>
<li>电路交换服务质量稳定：即使带宽不用（静默期）也不会被占用，但效率差</li>
<li>分组交换提供比电路交换更好的带宽共享</li>
<li>分组交换比电路交换更简单有效，实现成本低</li>
</ul>
<h5 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h5><ul>
<li>预留电路，若每条链路有n条电路，则每条电路在连接期间获得该链路带宽的1/n</li>
<li>多路复用：频分多路复用和时分多路复用</li>
</ul>
<h5 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h5><ul>
<li>存储转发传输：交换机能够开始想链路传输比特前，必须接收到整个分组</li>
<li>每段链路的存储转发时延：L（分组的比特）/R（每段链路的速率）</li>
</ul>
<h4 id="时延"><a href="#时延" class="headerlink" title="时延"></a>时延</h4><p>总时延 = 节点处理实验+排队时延+传输时延（L/R）+传播时延（D/S）</p>
<p>流量强度（La/R）不能大于1</p>
<h4 id="TraceRoute原理"><a href="#TraceRoute原理" class="headerlink" title="TraceRoute原理"></a>TraceRoute原理</h4><ol>
<li>客户端发送一个TTL为1的ICMP请求回显数据包，在第一跳的时候超时并返回一个ICMP超时数据包，得到第一跳的地址。</li>
<li>客户端发送一个TTL为2的ICMP请求回显数据包，得到第二跳的地址。</li>
<li>客户端发送一个TTL为3的ICMP请求回显数据包，到达目标主机，目标主机返回一个ICMP回显应答，traceroute结束。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/10/计算机网络总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="huangyt">
      <meta itemprop="description" content="Blogs of learning CS">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MyBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/10/计算机网络总结/" class="post-title-link" itemprop="url">计算机网络总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-01-10 15:48:19" itemprop="dateCreated datePublished" datetime="2019-01-10T15:48:19+08:00">2019-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-19 16:42:15" itemprop="dateModified" datetime="2020-07-19T16:42:15+08:00">2020-07-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h1><h2 id="因特网"><a href="#因特网" class="headerlink" title="因特网"></a>因特网</h2><h4 id="TCP-IP协议栈"><a href="#TCP-IP协议栈" class="headerlink" title="TCP/IP协议栈"></a>TCP/IP协议栈</h4><p>传输层：应用程序端点（进程）之间传送报文段</p>
<p>网络层：主机之间传送数据报</p>
<p>链路层：相邻的网络元素之间传送帧</p>
<p>物理层：节点之间传送比特</p>
<table>
<thead>
<tr>
<th>层次</th>
<th>信息分组</th>
<th>协议</th>
<th>端口</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用层</td>
<td>报文</td>
<td>HTTP、SMTP、FTP、DNS</td>
<td>应用程序</td>
</tr>
<tr>
<td>传输层</td>
<td>报文段</td>
<td>TCP、UDP</td>
<td>进程</td>
</tr>
<tr>
<td>网络层</td>
<td>数据报</td>
<td>IP、RIP、OSPF、BGP</td>
<td>主机</td>
</tr>
<tr>
<td>数据链路层</td>
<td>帧</td>
<td>以太网、WiFi、PPP</td>
<td>节点</td>
</tr>
<tr>
<td>物理层</td>
<td>比特</td>
<td></td>
<td>网络元素</td>
</tr>
</tbody>
</table>
<h4 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h4><p>一个协议定义了在两个或多个通信实体之间交换的报文格式和次序，以及在报文传输和接受或其他时间方面采取的动作</p>
<h4 id="接入网"><a href="#接入网" class="headerlink" title="接入网"></a>接入网</h4><p>将端系统连接到其边缘路由器的物理链路</p>
<h4 id="电路交换和分组交换"><a href="#电路交换和分组交换" class="headerlink" title="电路交换和分组交换"></a>电路交换和分组交换</h4><p>通过网络链路和交换机移动数据的两种基本方法</p>
<h5 id="主要区别"><a href="#主要区别" class="headerlink" title="主要区别"></a>主要区别</h5><ul>
<li>电路交换为通信提供的资源在通信会话期间会被预留；分组交换中不会被预留</li>
<li>电路交换服务质量稳定：即使带宽不用（静默期）也不会被占用，但效率差</li>
<li>分组交换提供比电路交换更好的带宽共享</li>
<li>分组交换比电路交换更简单有效，实现成本低</li>
</ul>
<h5 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h5><ul>
<li>预留电路，若每条链路有n条电路，则每条电路在连接期间获得该链路带宽的1/n</li>
<li>多路复用：频分多路复用和时分多路复用</li>
</ul>
<h5 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h5><ul>
<li>存储转发传输：交换机能够开始想链路传输比特前，必须接收到整个分组</li>
<li>每段链路的存储转发时延：L（分组的比特）/R（每段链路的速率）</li>
</ul>
<h4 id="时延"><a href="#时延" class="headerlink" title="时延"></a>时延</h4><p>总时延 = 节点处理实验+排队时延+传输时延（L/R）+传播时延（D/S）</p>
<p>流量强度（La/R）不能大于1</p>
<h4 id="TraceRoute原理"><a href="#TraceRoute原理" class="headerlink" title="TraceRoute原理"></a>TraceRoute原理</h4><ol>
<li>客户端发送一个TTL为1的ICMP请求回显数据包，在第一跳的时候超时并返回一个ICMP超时数据包，得到第一跳的地址。</li>
<li>客户端发送一个TTL为2的ICMP请求回显数据包，得到第二跳的地址。</li>
<li>客户端发送一个TTL为3的ICMP请求回显数据包，到达目标主机，目标主机返回一个ICMP回显应答，traceroute结束。</li>
</ol>
<h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><h3 id="应用层协议原理"><a href="#应用层协议原理" class="headerlink" title="应用层协议原理"></a>应用层协议原理</h3><h4 id="应用层程序体系结构"><a href="#应用层程序体系结构" class="headerlink" title="应用层程序体系结构"></a>应用层程序体系结构</h4><p>客户机/服务器体系结构：Web、FTP、Telent、e-mail</p>
<p>P2P体系结构：电话、文件分发、PTV</p>
<p>发起通信的进程为客户机，会话开始时等待联系的进程为服务器</p>
<h4 id="套接字"><a href="#套接字" class="headerlink" title="套接字"></a>套接字</h4><p>应用程序通过套接字收发报文，套接字是应用程序进程和传输层协议之间的接口</p>
<h4 id="支持应用的传输层协议"><a href="#支持应用的传输层协议" class="headerlink" title="支持应用的传输层协议"></a>支持应用的传输层协议</h4><table>
<thead>
<tr>
<th>应用</th>
<th>应用层协议</th>
<th>传输层协议</th>
</tr>
</thead>
<tbody>
<tr>
<td>邮件</td>
<td>SMTP</td>
<td>TCP</td>
</tr>
<tr>
<td>远程终端访问</td>
<td>Telent</td>
<td>TCP</td>
</tr>
<tr>
<td>Web</td>
<td>HTTP</td>
<td>TCP</td>
</tr>
<tr>
<td>文件传输</td>
<td>FTP</td>
<td>TCP</td>
</tr>
<tr>
<td>流媒体</td>
<td>HTTP、RTP</td>
<td>TCP或UDP</td>
</tr>
<tr>
<td>因特网电话</td>
<td>SIP、RTP</td>
<td>UDP</td>
</tr>
<tr>
<td>目录服务</td>
<td>DNS</td>
<td>UDP</td>
</tr>
</tbody>
</table>
<h4 id="进程寻址"><a href="#进程寻址" class="headerlink" title="进程寻址"></a>进程寻址</h4><p>识别接受进程需要的信息</p>
<ul>
<li>主机的名称或地址：ip地址</li>
<li>用来指定目的主机上接受进程的标识：端口号</li>
</ul>
<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p>超文本传输协议</p>
<p>HTTP是无状态协议：不保存关于用户机的任何信息</p>
<h4 id="报文结构"><a href="#报文结构" class="headerlink" title="报文结构"></a>报文结构</h4><h5 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h5><p><img src="计算机网络总结/httprq.png" alt></p>
<h5 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h5><p><img src="计算机网络总结/httprp.png" alt></p>
<h4 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h4><table>
<thead>
<tr>
<th></th>
<th>类别</th>
<th>原因短语</th>
</tr>
</thead>
<tbody>
<tr>
<td>1XX</td>
<td>Informational（信息性状态码）</td>
<td>接收的请求正在处理</td>
</tr>
<tr>
<td>2XX</td>
<td>Success（成功状态码）</td>
<td>请求正常处理完毕</td>
</tr>
<tr>
<td>3XX</td>
<td>Redirection（重定向状态码）</td>
<td>需要进行附加操作以完成请求</td>
</tr>
<tr>
<td>4XX</td>
<td>Client Error（客户端错误状态码）</td>
<td>服务器无法处理请求</td>
</tr>
<tr>
<td>5XX</td>
<td>Server Error（服务器错误状态码）</td>
<td>服务器处理请求出错</td>
</tr>
</tbody>
</table>
<h4 id="Cookie和Session的区别"><a href="#Cookie和Session的区别" class="headerlink" title="Cookie和Session的区别"></a>Cookie和Session的区别</h4><p>Cookie和session都是用来跟踪浏览器用户身份的会话方式</p>
<p>Session是在服务端保存的一个数据结构，用来跟踪用户的状态，这个数据可以保存在集群、数据库、文件中；<br>Cookie是客户端保存用户信息的一种机制，用来记录用户的一些信息，也是实现Session的一种方式。</p>
<h4 id="Web缓存"><a href="#Web缓存" class="headerlink" title="Web缓存"></a>Web缓存</h4><p>Web缓存器也称代理服务器，有自己的磁盘存储空间，并在该存储空间中保存最近请求过的对象的拷贝</p>
<p>p70 2-11</p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul>
<li>可以减少对客户机请求的相应时间</li>
<li>可以减少一个机构内部网与因特网接入链路上的通信量</li>
</ul>
<h4 id="条件GET方法"><a href="#条件GET方法" class="headerlink" title="条件GET方法"></a>条件GET方法</h4><h4 id="持久与非持久HTTP"><a href="#持久与非持久HTTP" class="headerlink" title="持久与非持久HTTP"></a>持久与非持久HTTP</h4><ul>
<li>持久HTTP：连接持续期间，C-S经由一个服务器套接字交换HTTP报文</li>
<li>非持久HTTP：对每一对请求/响应，都有一个新的TCP连接被创建，完成后即关闭</li>
</ul>
<p>HTTP详见<a href="https://www.jianshu.com/p/a6d086a3997d" target="_blank" rel="noopener">https://www.jianshu.com/p/a6d086a3997d</a></p>
<h3 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h3><p>FTP使用两个并行的TCP连接来传输文件，一个是控制连接（21端口）一个是数据连接（20端口）</p>
<p>控制连接贯穿了整个用户会话期间，但是会话中的每一次文件传输都需要建立一个新的数据连接</p>
<p>FTP使用分离的控制连接，故FTP的控制信息是带外的</p>
<p>FTP命令与回答用ASCII格式在控制连接上传送</p>
<h3 id="邮件传输协议"><a href="#邮件传输协议" class="headerlink" title="邮件传输协议"></a>邮件传输协议</h3><h4 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h4><p>p76 2-16</p>
<p>邮件服务器之间使用SMTP传送邮件</p>
<p>SMTP一般不用中间邮件服务器发送文件（两端直连）</p>
<p>邮件报文的主体部分职能用7位ASCII码表示，在传送邮件之前和之后需要编码和解码</p>
<h5 id="与HTTP的区别"><a href="#与HTTP的区别" class="headerlink" title="与HTTP的区别"></a>与HTTP的区别</h5><ul>
<li>拉协议vs推协议</li>
<li>SMTP要求7位ASCII码</li>
<li>HTTP用带内控制，FTP用带外控制</li>
</ul>
<h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><h4 id="DNS组成"><a href="#DNS组成" class="headerlink" title="DNS组成"></a>DNS组成</h4><ul>
<li>分层的DNS服务器实现的分布式数据库</li>
<li>允许主机查询数据库的应用层协议</li>
</ul>
<h4 id="DNS服务器的层次结构"><a href="#DNS服务器的层次结构" class="headerlink" title="DNS服务器的层次结构"></a>DNS服务器的层次结构</h4><p>根DNS服务器-&gt;顶级域服务器（TLD）-&gt;权威DNS服务器-&gt;本地DNS服务器</p>
<p>p89 2-21</p>
<p>DNS缓存：当DNS服务器接收到一个DNS回答时会将其缓存</p>
<h4 id="使用UDP协议的原因："><a href="#使用UDP协议的原因：" class="headerlink" title="使用UDP协议的原因："></a>使用UDP协议的原因：</h4><p>客户端向DNS服务器查询域名，一般返回的内容都不超过512字节，用UDP传输即可。不用经过TCP三次握手，这样DNS服务器负载更低，响应更快。虽然从理论上说，客户端也可以指定向DNS服务器查询的时候使用TCP，但事实上，很多DNS服务器进行配置的时候，仅支持UDP查询包</p>
<h4 id="资源记录"><a href="#资源记录" class="headerlink" title="资源记录"></a>资源记录</h4><p>提供主机名到IP地址的映射</p>
<p>（Name，Value，Type，TTL）</p>
<p>TTL：记录的生存时间（资源应从缓存中删除的时间）</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>IP地址</td>
</tr>
<tr>
<td>NS</td>
<td>权威DNS服务器的主机名</td>
</tr>
<tr>
<td>CNAME</td>
<td>别名为Name的主机对应的规范主机名</td>
</tr>
<tr>
<td>MX</td>
<td>别名为Name的邮件服务器的规范主机名</td>
</tr>
</tbody>
</table>
<h4 id="DNS报文"><a href="#DNS报文" class="headerlink" title="DNS报文"></a>DNS报文</h4><p>p91 2-23</p>
<h3 id="P2P应用"><a href="#P2P应用" class="headerlink" title="P2P应用"></a>P2P应用</h3><p>C-S体系结构的缺点：分发时间由NF/u决定，随着对等方的数量N线性地增加</p>
<h3 id="socket编程"><a href="#socket编程" class="headerlink" title="socket编程"></a>socket编程</h3><h4 id="TCP的socket编程"><a href="#TCP的socket编程" class="headerlink" title="TCP的socket编程"></a>TCP的socket编程</h4><p><img src="/2019/01/10/计算机网络总结/socket.png" alt></p>
<h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><h3 id="多路复用和多路分解"><a href="#多路复用和多路分解" class="headerlink" title="多路复用和多路分解"></a>多路复用和多路分解</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><ul>
<li>多路复用：从源主机不同套接字中收集数据块，并为每个数据块封装首部信息从而生成报文段，将报文段传递到网络层</li>
<li>多路分解：将传输层报文段中的数据交付到正确的套接字</li>
<li>指定要交付的套接字的字段：源端口号和目的端口号</li>
</ul>
<h4 id="Socket的共用"><a href="#Socket的共用" class="headerlink" title="Socket的共用"></a>Socket的共用</h4><p>若两个UDP报文段有不同的源IP地址和源端口号，但有相同的IP地址和目的端口号，则通过相同的套接字定向到相同的目的进程；TCP中，两个有不同源IP地址或源端口号的TCP报文段会被定向到两个不同的套接字</p>
<p>TCP套接字由（源IP地址、源端口号、目的IP地址、目的端口号）来标识</p>
<h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>无连接、不可靠</p>
<h4 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h4><ul>
<li>应用层能更好地控制要发送的数据和发送时间</li>
<li>无需建立连接</li>
<li>无连接状态</li>
<li>分组首部开销小</li>
</ul>
<h4 id="报文段结构"><a href="#报文段结构" class="headerlink" title="报文段结构"></a>报文段结构</h4><ul>
<li>首部：源端口号、目的端口号、长度、检验和</li>
<li>应用数据</li>
</ul>
<h4 id="UDP检验和"><a href="#UDP检验和" class="headerlink" title="UDP检验和"></a>UDP检验和</h4><p>发送方对<strong>报文段中所有</strong>16比特字的和进行反码运算，接收方一起相加，若无差错则和全为1</p>
<h3 id="可靠传输"><a href="#可靠传输" class="headerlink" title="可靠传输"></a>可靠传输</h3><p>模型 p137 3-8</p>
<h4 id="构造可靠数据传输协议"><a href="#构造可靠数据传输协议" class="headerlink" title="构造可靠数据传输协议"></a>构造可靠数据传输协议</h4><p>p137-144</p>
<ol>
<li>rdt1.0：完全可靠信道上的传输</li>
<li>rdt2.0：加入差错检测、接收方反馈和重传 引入序号</li>
<li>rdt3.0：有比特交替协议 倒计数定时器</li>
</ol>
<h4 id="流水线"><a href="#流水线" class="headerlink" title="流水线"></a>流水线</h4><p>p146 3-18</p>
<ul>
<li>必须增加序号范围</li>
<li>协议的发送方和接收方必须缓存多个分组</li>
</ul>
<h5 id="解决流水线差错"><a href="#解决流水线差错" class="headerlink" title="解决流水线差错"></a>解决流水线差错</h5><p>回退N步（GBN，滑动窗口协议）p147</p>
<p>选择重传（SR）p150</p>
<p>选择重传中，每个分组必须拥有自己的逻辑定时器，接收方和发送方的窗口总是不一致</p>
<h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><p>面向连接、可靠、全双工</p>
<p>首部长度字段指示32比特字为单位的TCP首部长度</p>
<p>报文段的序号是报文段首字节的字节流编号，故TCP传输的最大文件的大小：2^32</p>
<p>从开始建立连接到收到一次发送的数据的总时间：2RTT，三次握手+一次数据传输</p>
<h4 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h4><p><img src="/2019/01/10/计算机网络总结/TCP3.png" alt></p>
<h4 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h4><p><img src="/2019/01/10/计算机网络总结/TCP4.jpg" alt></p>
<h4 id="为什么TCP握手不是两次或四次"><a href="#为什么TCP握手不是两次或四次" class="headerlink" title="为什么TCP握手不是两次或四次"></a>为什么TCP握手不是两次或四次</h4><p>三次握手分别作用：</p>
<ul>
<li>第一次握手后，S可以确认自己收报文与C发报文的功能都正常，而C呢，它什么都不能确认。</li>
<li>第二次握手后，C可以确认自己的收发报文与S的收发报文功能都正常，也就是认为连接已建立。</li>
<li>那么第三次呢，S也可以确认双方能够正常通信。</li>
</ul>
<p>两次：防止失效的连接请求报文段被服务端接收，从而产生错误</p>
<p>如果不进行第三次握手，所以在S对C的请求进行回应(第二次握手)后，就会理所当然的认为连接已建立，而如果C并没有收到S的回应呢？此时，C仍认为连接未建立，S会对已建立的连接保存必要的资源，如果大量的这种情况，S会崩溃。 </p>
<p>四次：冗余</p>
<h4 id="Time-wait原因"><a href="#Time-wait原因" class="headerlink" title="Time-wait原因"></a>Time-wait原因</h4><ul>
<li>为了保证客户端发送的最后1个连接释放确认报文能到达服务器，从而使得服务器能正常释放连接</li>
<li>防止上文提到的早已失效的连接请求报文出现在本连接中<br>客户端发送了最后1个连接释放请求确认报文后，再经过2<code>MSL</code>时间，则可使本连接持续时间内所产生的所有报文段都从网络中消失，即在下1个新的连接中就不会出现早已失效的连接请求报文</li>
</ul>
<h4 id="流量控制和拥塞控制的目的"><a href="#流量控制和拥塞控制的目的" class="headerlink" title="流量控制和拥塞控制的目的"></a>流量控制和拥塞控制的目的</h4><p>流量控制：消除发送方使接收方缓存溢出的可能性</p>
<p>拥塞控制：减少因为网络的拥塞而丢包的可能性</p>
<h3 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h3><p><img src="/2019/01/10/计算机网络总结/TCP拥塞控制过程.jpg" alt="TCP拥塞控制过程"></p>
<p><img src="/2019/01/10/计算机网络总结/TCP拥塞控制状态转移.jpg" alt></p>
<ul>
<li>慢启动：cwnd = 1，每一个传输的报文确认后，cwnd+=1（速率指数增长）</li>
<li>拥塞避免：加性增，每过一个RTT，cwnd+=1（速率线性增长）</li>
<li>快速恢复：ssthresh = cwnd/2，cwnd = sstresh</li>
</ul>
<h4 id="TCP快速重传为什么是三次冗余ACK："><a href="#TCP快速重传为什么是三次冗余ACK：" class="headerlink" title="TCP快速重传为什么是三次冗余ACK："></a>TCP快速重传为什么是三次冗余ACK：</h4><p>两次duplicated ACK时很可能是乱序造成的，三次duplicated ACK时很可能是丢包造成的，四次duplicated ACK更更更可能是丢包造成的，但是这样的响应策略太慢。</p>
<h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><h4 id="网络层的主要功能"><a href="#网络层的主要功能" class="headerlink" title="网络层的主要功能"></a>网络层的主要功能</h4><ul>
<li>转发：将分组从一个输入链路接口转移到适当的输出链路接口的路由器本地操作</li>
<li>选路：分组从源到目的地时，决定端到端路径的网络范围</li>
</ul>
<h4 id="分组交换机"><a href="#分组交换机" class="headerlink" title="分组交换机"></a>分组交换机</h4><ul>
<li>交换机：基于链路层字段中的值作转发决定</li>
<li>路由器：基于网络层字段中的值作转发决定</li>
</ul>
<p>网络层提供尽力而为服务</p>
<h3 id="虚拟电路和数据报"><a href="#虚拟电路和数据报" class="headerlink" title="虚拟电路和数据报"></a>虚拟电路和数据报</h3><h4 id="主要区别-1"><a href="#主要区别-1" class="headerlink" title="主要区别"></a>主要区别</h4><p>网络层提供连接服务的网络：虚电路网络</p>
<p>网络层提供无连接服务的网络：数据报网络</p>
<h4 id="虚电路网络"><a href="#虚电路网络" class="headerlink" title="虚电路网络"></a>虚电路网络</h4><h5 id="虚电路的组成"><a href="#虚电路的组成" class="headerlink" title="虚电路的组成"></a>虚电路的组成</h5><p>源与目的主机之间的路径、VC号（沿着该路径每段链路一个号码）、沿着该路径每台路由器的转发表表项</p>
<p>该网络的路由器必须为进行中的连接维持连接状态信息，建立新连接时将新的连接项加入转发表中，释放时删除</p>
<h5 id="虚电路的阶段"><a href="#虚电路的阶段" class="headerlink" title="虚电路的阶段"></a>虚电路的阶段</h5><p>虚电路建立、数据传送、虚电路拆除</p>
<p>路由器之间传递的用于建立VC的报文称为信令报文，用来交换这些报文的协议成为信令协议</p>
<h4 id="数据报网络"><a href="#数据报网络" class="headerlink" title="数据报网络"></a>数据报网络</h4><p>最长前缀匹配原则</p>
<p>转发表由选路算法修改，1-5min更新一次</p>
<h3 id="路由器原理"><a href="#路由器原理" class="headerlink" title="路由器原理"></a>路由器原理</h3><h4 id="交换结构"><a href="#交换结构" class="headerlink" title="交换结构"></a>交换结构</h4><h5 id="交换技术"><a href="#交换技术" class="headerlink" title="交换技术"></a>交换技术</h5><ul>
<li>经内存交换</li>
<li>经一根总线交换</li>
<li>经一个互联网络交换</li>
</ul>
<p>经过总线比内存快：不需要经过路由处理器的干预</p>
<h4 id="输出端口"><a href="#输出端口" class="headerlink" title="输出端口"></a>输出端口</h4><p>交换结构-&gt;排队（缓存管理）-&gt;数据链路处理（协议、封装）-&gt;线路段接-&gt;</p>
<h4 id="排队"><a href="#排队" class="headerlink" title="排队"></a>排队</h4><p>输入输出端口若发生排队，必须有一个分组调度程序来选择下一个传送的分组：FCFS、加权公平排队（WFQ）…</p>
<p>缓存满时要弃尾或者删除一个已排队的分组</p>
<p>线路前部阻塞（HOL）：若输入端口排队中，之前的的分组被阻塞，则之后的分组也必须等待，即使其输出端口无竞争</p>
<h3 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h3><h4 id="数据报格式"><a href="#数据报格式" class="headerlink" title="数据报格式"></a>数据报格式</h4><ul>
<li><p>版本号：IPv4、IPv6</p>
</li>
<li><p>首部长度：存在可选项故需要首部长度，一般为20字节</p>
</li>
<li><p>服务类型</p>
</li>
<li><p>数据报长度（字节）：2字节，故数据报理论长度为65535字节</p>
</li>
<li><p>标识、标志、片偏移：IP分片相关</p>
</li>
<li><p>寿命TTL：保证数据报不会永远在网络中循环</p>
</li>
<li><p>上层协议</p>
</li>
<li><p>首部检验和</p>
<p>为什么传输层和网络层都差错检测？</p>
<ul>
<li>IP层对IP首部检验，TCP/UDP对整个TCP/UDP报文段进行</li>
<li>TCP/UDP与IP不一定是同一个协议栈</li>
</ul>
</li>
<li><p>源和目的IP地址</p>
</li>
<li><p>选项：很少使用</p>
</li>
</ul>
<h4 id="IP数据报分片"><a href="#IP数据报分片" class="headerlink" title="IP数据报分片"></a>IP数据报分片</h4><h5 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h5><p>链路层的最大传输单元（MTU）比以太网帧最大可承受的数据小</p>
<h5 id="IP片"><a href="#IP片" class="headerlink" title="IP片"></a>IP片</h5><ul>
<li>标识：说明属于同一数据包</li>
<li>偏移：每个offset表示8字节数据</li>
<li>标志：flag==1说明后面还有，flag==0说明是最后一片</li>
</ul>
<p>在目的地端系统，数据报在IP层完全重构为初始的IP数据报才会被交付给目的地传输层，数据报的重新组装工作在端系统中完成，而不是路由器</p>
<p>若不允许分片，则路由器收到过大的数据报会丢包</p>
<h4 id="子网"><a href="#子网" class="headerlink" title="子网"></a>子网</h4><p>分开主机和路由器的每个接口，产生的几个分离的网络岛，每个独立的网络都是一个子网</p>
<h4 id="无类别域间选路CIDR"><a href="#无类别域间选路CIDR" class="headerlink" title="无类别域间选路CIDR"></a>无类别域间选路CIDR</h4><p>因特网的地址分配策略：无类别域间选路</p>
<p>将32位地址划分为a.b.c.d/x，x为子网长度，该地址的x最高比特构成IP地址的网络部分，称为该地址的前缀</p>
<h4 id="分类编址"><a href="#分类编址" class="headerlink" title="分类编址"></a>分类编址</h4><p>8 16 24比特子网地址的网络成为A B C类网络</p>
<ul>
<li>A 10.0.0.0 - 10.255.255.255</li>
<li>B 172.16.0.0 - 172.31.255.255</li>
<li>C 192.168.0.0 - 192.168.255.255</li>
</ul>
<p>子网广播：子网.all 1</p>
<p>子网ID：子网.all 0</p>
<h4 id="动态主机配置协议DHCP"><a href="#动态主机配置协议DHCP" class="headerlink" title="动态主机配置协议DHCP"></a>动态主机配置协议DHCP</h4><p>为组织内的主机和路由器接口分配IP地址，还允许主机获取其他信息如其子网掩码、默认网关、DNS服务器地址</p>
<p>也称为即插即用协议</p>
<h5 id="DHCP步骤"><a href="#DHCP步骤" class="headerlink" title="DHCP步骤"></a>DHCP步骤</h5><ul>
<li>DHCP服务器发现：主机广播（255.255.255.255）DHCP发现报文，源地址为0.0.0.0</li>
<li>DHCP服务器提供：DHCP服务器用DHCP提供报文进行响应，用广播地址255.255.255.255</li>
<li>DHCP请求：客户机选择DHCP服务器（可能有多个），发送DHCP请求报文，广播，目的为通知其他用户</li>
<li>DHCPACK：服务器用DHCPACK对请求报文进行响应，广播，同理</li>
</ul>
<h5 id="不足"><a href="#不足" class="headerlink" title="不足"></a>不足</h5><p>在子网间移动时不能维持与远程应用间的连接</p>
<h4 id="网络地址转换NAT"><a href="#网络地址转换NAT" class="headerlink" title="网络地址转换NAT"></a>网络地址转换NAT</h4><h5 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h5><p>NAT路由器上维护NAT转换表，表项中包含了端口号和IP地址</p>
<p>e.g</p>
<table>
<thead>
<tr>
<th>WAN端</th>
<th>LAN端</th>
</tr>
</thead>
<tbody>
<tr>
<td>138.76.29.7,5001</td>
<td>10.0.0.1,3345</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<h5 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h5><p>违反端到端原则，妨碍P2P应用程序：P2P要求任何参与对等发A应该能够向任何其他参与向任何对等参与方B发起一个TCP连接</p>
<h5 id="NAT穿越"><a href="#NAT穿越" class="headerlink" title="NAT穿越"></a>NAT穿越</h5><p>对等方A通过一个中间对等方C与对等方B联系，对等方A能够经由对等方C请求对等方B，发起直接返回对等方A的一个TCP连接</p>
<h4 id="互联网控制报文协议ICMP"><a href="#互联网控制报文协议ICMP" class="headerlink" title="互联网控制报文协议ICMP"></a>互联网控制报文协议ICMP</h4><p>ICMP结构上位于IP之上，但通常被认为是IP的一部分</p>
<h5 id="TraceRoute"><a href="#TraceRoute" class="headerlink" title="TraceRoute"></a>TraceRoute</h5><p>向目的主机一次发送一系列IP数据报，均携带不可到达的UDP端口号的UDP报文，TTL依次增大。若不到达源主机，路由器丢弃该数据报，返回ICMP警告报文，包含路由器名字与IP地址，若到达，源主机从定时器得到往返时延和路由器名字与IP地址</p>
<p>如何知道何时停止：目的主机会向源主机发送一个端口不可到达的ICMP报文，收到时得知应停止</p>
<h5 id="ICMP报文类型"><a href="#ICMP报文类型" class="headerlink" title="ICMP报文类型"></a>ICMP报文类型</h5><p>p231 4-23</p>
<h4 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h4><h5 id="数据报格式与IPv4的不同"><a href="#数据报格式与IPv4的不同" class="headerlink" title="数据报格式与IPv4的不同"></a>数据报格式与IPv4的不同</h5><ul>
<li>去除检验和</li>
<li>支持选项但在下一个首部 字段中</li>
<li>地址扩容 32-&gt;128</li>
<li>舍弃许多IPv4的首部字段</li>
<li>流标签：用于标识一个数据报的流</li>
</ul>
<p>取消了分片功能、首部检验和，加快IP转发速度</p>
<h5 id="从IPv4向IPv6迁移"><a href="#从IPv4向IPv6迁移" class="headerlink" title="从IPv4向IPv6迁移"></a>从IPv4向IPv6迁移</h5><p>双栈 隧道 p235 p236</p>
<p>双栈：直接做转换，但是会丢失字段</p>
<p>隧道：将IPv4作为数据封装进IPv6</p>
<h3 id="选路算法"><a href="#选路算法" class="headerlink" title="选路算法"></a>选路算法</h3><p>源主机的默认路由器（第一跳路由器）：源路由器</p>
<p>目的主机的默认路由器：目的路由器</p>
<h4 id="选路算法的分类"><a href="#选路算法的分类" class="headerlink" title="选路算法的分类"></a>选路算法的分类</h4><ul>
<li>按全局性/分布式分类<ul>
<li>全局选路算法：链路状态算法（LS），必须知道每条链路的费用</li>
<li>分布式选路算法：距离向量算法（DV），每个节点得知与其直接相连链路的费用即可工作</li>
</ul>
</li>
<li>按静态动态分类：静态选路算法中，路由变化缓慢，动态算法周期性随拓扑或费用的变化运行</li>
<li>按负载敏感/迟钝分类：负载敏感算法中，链路费用动态变化，反应底层链路的拥塞水平，RIP、OSPF、BGP都是负载迟钝的</li>
</ul>
<h4 id="链路状态选路算法"><a href="#链路状态选路算法" class="headerlink" title="链路状态选路算法"></a>链路状态选路算法</h4><p>Dijkstra算法 p240</p>
<p>对于每个节点记录（距离，上一跳路由）</p>
<p>最坏情况：O(n2)</p>
<p>防止振荡：保证并非所有的路由器都同时运行LS算法，但会出现自同步，每台路由器随机发送链路通告的时间来避免自同步</p>
<h4 id="距离向量选路算法"><a href="#距离向量选路算法" class="headerlink" title="距离向量选路算法"></a>距离向量选路算法</h4><p>迭代、异步、分布式</p>
<p>dx(y) = min{c(x, v) + dv(y)}</p>
<p>每个节点维护下列选路数据</p>
<ul>
<li>直连每个邻居的费用c(x,y)</li>
<li>节点的距离向量：节点到N中所有目的地费用的估计值</li>
<li>节点每个邻居的距离向量</li>
</ul>
<p>每个节点不时向每个邻居发送它的距离向量，当节点收到来自邻居的距离向量时，保存并更新自己的距离向量</p>
<h5 id="毒性逆转"><a href="#毒性逆转" class="headerlink" title="毒性逆转"></a>毒性逆转</h5><p>DV可能导致选路环路，从而导致计数到无穷问题</p>
<p>解决：毒性逆转</p>
<p>若z通过y选路到达目的地x，则z通告y：z到x的距离为无穷大</p>
<p>但毒性逆转无法检测到3个或更多节点的环路</p>
<h4 id="LS与DV的比较"><a href="#LS与DV的比较" class="headerlink" title="LS与DV的比较"></a>LS与DV的比较</h4><ul>
<li>DV中，节点仅与它直接相连的邻居通信，告知对其他所有节点的链路费用；LS中，每个节点与其他所有节点通信，但仅告知直接相连的链路费用</li>
<li>报文复杂性：LS O(N*E)，DV仅在新联路费用导致与相连的节点最低费用路径改变时才传播改变的链路费用</li>
<li>收敛速度：LS O(N2)， DV收敛较慢</li>
<li>健壮性：LS中，每个节点仅计算自己的转发表，一定程度上是分离的；DV中一个不正确的节点计算值会扩散到整个网络</li>
</ul>
<h4 id="层次选路"><a href="#层次选路" class="headerlink" title="层次选路"></a>层次选路</h4><p>自治系统内部选路协议（RIP、OSPF）intra</p>
<ul>
<li>自治系统内部选路</li>
</ul>
<p>自治系统间选路协议（BGP） inter</p>
<ul>
<li>从相邻AS获取可达性信息</li>
<li>向该AS中所有路由传播可达性信息</li>
<li>转发表项（x，I）x为子网，I为从该路由器到网关路由器的位于最低费用路径上的路由器接口</li>
</ul>
<p>热土豆算法：选择具有最小的最低费用的网关</p>
<h4 id="在转发表中增加AS外目的地的步骤"><a href="#在转发表中增加AS外目的地的步骤" class="headerlink" title="在转发表中增加AS外目的地的步骤"></a>在转发表中增加AS外目的地的步骤</h4><ul>
<li>从AS间协议知道经多个网关可达子网x</li>
<li>使用来自AS内部协议的选路信息来决定每个网关的最低费用路径的费用</li>
<li>热土豆选路：选择具有最小的最低费用的网关</li>
<li>从转发表决定通向最低费用网关的接口I，将（x，I）项放入转发表中</li>
</ul>
<h3 id="因特网中的选路"><a href="#因特网中的选路" class="headerlink" title="因特网中的选路"></a>因特网中的选路</h3><h4 id="选路信息协议RIP"><a href="#选路信息协议RIP" class="headerlink" title="选路信息协议RIP"></a>选路信息协议RIP</h4><p>一种距离向量协议，用跳数作为其费用测度</p>
<p>用RIP响应报文交换选路更新信息，又称RIP通告</p>
<p>每台路由器维护一张称为选路表的RIP表：</p>
<table>
<thead>
<tr>
<th>目的子网</th>
<th>下一台路由器</th>
<th>到目的地的跳数</th>
</tr>
</thead>
<tbody>
<tr>
<td>w</td>
<td>A</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>设置最大跳数为15，防止环路</p>
<p>一旦超过180秒没有监听到其邻居，该邻居不再被认为是可达的，修改本地选路表，通告相邻邻居</p>
<p>RIP使用UDP来传递信息，可当做一个应用层进程</p>
<h4 id="开放最短路径优先OSPF"><a href="#开放最短路径优先OSPF" class="headerlink" title="开放最短路径优先OSPF"></a>开放最短路径优先OSPF</h4><p>一个使用洪泛链路状态信息的链路状态协议和一个Dijkstra最低费用路径算法</p>
<p>每当一条链路的状态发生变化，路由器广播链路状态信息</p>
<p>OSPF通告包含在OSPF报文中，OSPF报文直接承载在IP分组中</p>
<h5 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h5><ul>
<li>安全</li>
<li>允许多条相同费用的路径</li>
<li>对单播和多播选路的综合支持</li>
<li>支持单个选路域内的层次结构</li>
</ul>
<h5 id="层次结构的OSPF"><a href="#层次结构的OSPF" class="headerlink" title="层次结构的OSPF"></a>层次结构的OSPF</h5><p>4种OSPF路由器</p>
<ul>
<li>内部路由器：位于非主干区域且只执行AS内部选路</li>
<li>区域边界路由器：同时属于区域和主干两个区域</li>
<li>主干路由器：执行主干中的选路</li>
<li>边界路由器：与属于其他AS的路由器交换选路信息</li>
</ul>
<h4 id="边界网关协议BGP"><a href="#边界网关协议BGP" class="headerlink" title="边界网关协议BGP"></a>边界网关协议BGP</h4><h5 id="BGP基础"><a href="#BGP基础" class="headerlink" title="BGP基础"></a>BGP基础</h5><p>位于连接端点的两台路由器称为BGP对等方，沿着该连接发送所有BGP报文的TCP连接称为BGP会话</p>
<p>跨越两个AS的BGP会话称为外部BGP会话（eBGP），AS内部的BGP会话称为内部BGP会话（iBGP会话）</p>
<p>BGP中，目的地不是主机而是CDIR化的前缀</p>
<h5 id="路径属性和BGP路由"><a href="#路径属性和BGP路由" class="headerlink" title="路径属性和BGP路由"></a>路径属性和BGP路由</h5><p>一个AS有全局唯一的自治系统号（ASN）</p>
<p>重要的BGP属性</p>
<ul>
<li>AS-PATH：包含了前缀的通告已经通过的AS，若路由器看到自己的AS包含在AS-PATH中，拒绝该通告，防止循环通告</li>
<li>NEXT-HOP：一开始某AS-PATH的路由器接口</li>
</ul>
<p>网关路由器收到一个路由器通告时，它使用输入策略来决定是否接受或过滤改路由，是否设置某种属性</p>
<h5 id="BGP路由选择"><a href="#BGP路由选择" class="headerlink" title="BGP路由选择"></a>BGP路由选择</h5><p>按以下顺序消除直至留下一条路由：</p>
<ul>
<li>选最高本地偏好值（设定或从另一路由学习到）</li>
<li>选最短AS-PATH的路由</li>
<li>选最靠近NEXT-HOP路由器的路由（热土豆选路）</li>
<li>用BGP标识符来选择路由</li>
</ul>
<h5 id="选路策略"><a href="#选路策略" class="headerlink" title="选路策略"></a>选路策略</h5><p>任何穿越某ISP主干网的流量必须是源或目的地位于该ISP的某个客户网络，否则这些流量将会搭便车</p>
<h3 id="广播和组播"><a href="#广播和组播" class="headerlink" title="广播和组播"></a>广播和组播</h3><h4 id="洪泛"><a href="#洪泛" class="headerlink" title="洪泛"></a>洪泛</h4><p>节点向其所有邻居发送该分组的拷贝</p>
<p>若无控制，会出现广播风暴</p>
<h5 id="受控洪泛的方法"><a href="#受控洪泛的方法" class="headerlink" title="受控洪泛的方法"></a>受控洪泛的方法</h5><ul>
<li>源节点将其地址和广播序号加入广播分组再发送，接受时检查该分组是否在列表中，在则丢弃；不在则向除来源外的邻居转发</li>
<li>反向路径转发（反向路径广播）：当一台路由器接收到具有给定源地址的广播分组时，仅当该分组到的的链路正好是位于自己到其源的最短单播路径上，才向其他出链路转发分组</li>
</ul>
<h2 id="链路层"><a href="#链路层" class="headerlink" title="链路层"></a>链路层</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>链路层协议采取的动作包括差错检测、重传、流量控制和随机接入</p>
<p>链路层协议的任务：将网络层的数据报通过路径中的单端链路节点到节点地传送</p>
<p>数据报在不同的链路上可能由不同链路层协议所承载</p>
<h4 id="链路层能提供的服务"><a href="#链路层能提供的服务" class="headerlink" title="链路层能提供的服务"></a>链路层能提供的服务</h4><ul>
<li>成帧</li>
<li>链路接入</li>
<li>可靠交付通过确认和重传取得</li>
<li>流量控制</li>
<li>差错检测和纠正</li>
<li>半全工和双全工：可否同时传输和接收</li>
</ul>
<p>链路层的主体部分在网络适配器中实现，也称为网络接口卡</p>
<h3 id="差错检测和纠错"><a href="#差错检测和纠错" class="headerlink" title="差错检测和纠错"></a>差错检测和纠错</h3><p>比特级差错检测和纠错</p>
<h4 id="奇偶校验"><a href="#奇偶校验" class="headerlink" title="奇偶校验"></a>奇偶校验</h4><h5 id="奇检测"><a href="#奇检测" class="headerlink" title="奇检测"></a>奇检测</h5><p>包含一个附加比特，使得d+1个比特中1的总数总为奇数；偶检测相反</p>
<p>只能检测奇数个比特差错</p>
<h5 id="二维奇偶校验"><a href="#二维奇偶校验" class="headerlink" title="二维奇偶校验"></a>二维奇偶校验</h5><p>可以纠错单个比特差错，可以检测（但不能纠正）一个分组中两个比特差错的任何组合</p>
<h4 id="检验和方法"><a href="#检验和方法" class="headerlink" title="检验和方法"></a>检验和方法</h4><p>将k比特的整数加起来，并且用得到的和作为差错检测比特</p>
<h4 id="循环冗余检测"><a href="#循环冗余检测" class="headerlink" title="循环冗余检测"></a>循环冗余检测</h4><ul>
<li>r+1比特模式，R有r个比特</li>
<li>CRC采用模2算术操作，加法不进位减法不借位</li>
</ul>
<p>接收方检验：用G去除d+r，余数为0则无差错</p>
<h3 id="多路访问协议"><a href="#多路访问协议" class="headerlink" title="多路访问协议"></a>多路访问协议</h3><h4 id="信道划分协议"><a href="#信道划分协议" class="headerlink" title="信道划分协议"></a>信道划分协议</h4><h5 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h5><ul>
<li>时分多路复用（TDM）：将时间划分为时间帧，并进一步划分为N个时隙</li>
<li>频分多路复用（FDM）</li>
<li>码分多址（CDMA）：每个节点分配不同的编码</li>
</ul>
<h5 id="FDM、TDM的缺陷"><a href="#FDM、TDM的缺陷" class="headerlink" title="FDM、TDM的缺陷"></a>FDM、TDM的缺陷</h5><ul>
<li>节点被限制在R/N的平均速率，即使它为唯一有分组要发送的节点</li>
<li>节点必须总是等待它再传输序列中的轮次，即使它是唯一一个有帧要发送的节点</li>
</ul>
<h5 id="FDM、TDM优点"><a href="#FDM、TDM优点" class="headerlink" title="FDM、TDM优点"></a>FDM、TDM优点</h5><ul>
<li>避免碰撞、公平划分带宽</li>
</ul>
<h5 id="CMDA"><a href="#CMDA" class="headerlink" title="CMDA"></a>CMDA</h5><p>CDMA对每个节点只分配一种不同的编码，不同的节点能同时传输，互不干扰</p>
<h4 id="随机接入协议"><a href="#随机接入协议" class="headerlink" title="随机接入协议"></a>随机接入协议</h4><p>一个节点总是以信道的全部速率进行发送，有碰撞时，涉及碰撞的节点反复重发它的帧，直至无碰撞为止。但不是立刻重发，而是等待一个随机时延</p>
<h5 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h5><p>当有大量活跃节点且每个节点总有大量的帧要发送时，长期运行中成功时隙的份额</p>
<h5 id="时隙ALOHA"><a href="#时隙ALOHA" class="headerlink" title="时隙ALOHA"></a>时隙ALOHA</h5><p>如果有碰撞，节点在时隙结束之前检测到这次碰撞，以概率p在后续每个时隙中重传它的帧，直到该帧被无碰撞地传输出去</p>
<p>优点：只有一个活跃节点时工作出色</p>
<p>当有N个节点时其效率为Np(1-p)^(N-1)，最大效率约为1/2e(0.37)</p>
<h5 id="ALOHA"><a href="#ALOHA" class="headerlink" title="ALOHA"></a>ALOHA</h5><p>若发生碰撞，下一时隙以p概率重传该帧，以(1-p)概率等待一帧；等待之后如前</p>
<p>最大效率为1/2e</p>
<h5 id="载波侦听多路访问CSMA"><a href="#载波侦听多路访问CSMA" class="headerlink" title="载波侦听多路访问CSMA"></a>载波侦听多路访问CSMA</h5><ul>
<li>载波侦听：发送前先侦听，若空闲则发送，否则等待</li>
<li>碰撞检测：若碰撞则停止传输</li>
</ul>
<p>有碰撞检测的CSMA：CSMA/CD</p>
<p>由于存在信道传播时延，即使进行了载波侦听，仍可能出现碰撞。信道传输时延越大，载波侦听节点越可能不能侦听到网络中另一节点已开始传输</p>
<h4 id="轮流协议"><a href="#轮流协议" class="headerlink" title="轮流协议"></a>轮流协议</h4><h5 id="轮询协议"><a href="#轮询协议" class="headerlink" title="轮询协议"></a>轮询协议</h5><p>指定节点之一为主节点，主节点以循环的方式轮询每个节点</p>
<p>缺点：</p>
<ul>
<li>若只有一个节点时活跃的，主节点也必须依次轮询</li>
<li>若主节点有故障，整个信道不可操作</li>
</ul>
<h5 id="令牌传递协议"><a href="#令牌传递协议" class="headerlink" title="令牌传递协议"></a>令牌传递协议</h5><p>没有主节点，有帧要发送的节点才持有令牌，否则将令牌转发，效率高</p>
<p>缺点：一个节点的故障会使整个信道崩溃</p>
<h3 id="LANs"><a href="#LANs" class="headerlink" title="LANs"></a>LANs</h3><p>LAN：Local Area Network 局域网</p>
<h4 id="MAC地址"><a href="#MAC地址" class="headerlink" title="MAC地址"></a>MAC地址</h4><p>LAN地址、物理地址、MAC地址</p>
<p>同个子网下，数据链路层在网络适配器间传输数据使用的地址标识</p>
<p>长度6个字节，每个字节为一对16进制数，具有扁平结构（所以具备可迁移性）</p>
<p>MAC广播地址：FF-FF-FF-FF-FF-FF</p>
<h4 id="地址解析协议ARP"><a href="#地址解析协议ARP" class="headerlink" title="地址解析协议ARP"></a>地址解析协议ARP</h4><p>将网络层地址转换为链路层地址</p>
<p>每个节点（主机或路由器）的ARP模块都有一个ARP表</p>
<h5 id="DNS和ARP的区别"><a href="#DNS和ARP的区别" class="headerlink" title="DNS和ARP的区别"></a>DNS和ARP的区别</h5><p>DNS为因特网中任何地方的主机解析主机名，但ARP只为同一个子网下的节点解析IP地址</p>
<h5 id="ARP表"><a href="#ARP表" class="headerlink" title="ARP表"></a>ARP表</h5><table>
<thead>
<tr>
<th>IP地址</th>
<th>MAC地址</th>
<th>TTL</th>
</tr>
</thead>
<tbody>
<tr>
<td>222.222.222.221</td>
<td>88-B2-2F-54-1A-0F</td>
<td>13:45:00</td>
</tr>
</tbody>
</table>
<p>生存期（TTL）：从表中删除每个映射的时间</p>
<h5 id="ARP寻址的过程"><a href="#ARP寻址的过程" class="headerlink" title="ARP寻址的过程"></a>ARP寻址的过程</h5><ul>
<li>发送节点构造并广播ARP查询分组，其中包括发送节点和接受节点的MAC地址和IP地址（接受节点的MAC地址为广播地址）</li>
<li>子网中的适配器接收后，向上传递给节点中的ARP模块，检查IP地址是否与ARP分组中的匹配</li>
<li>一个匹配的节点给查询节点发送回一个响应ARP分组</li>
<li>发送节点更新ARP表</li>
</ul>
<h5 id="发送数据报到子网以外的节点"><a href="#发送数据报到子网以外的节点" class="headerlink" title="发送数据报到子网以外的节点"></a>发送数据报到子网以外的节点</h5><p>源IP地址，源MAC地址：主机的IP地址和MAC地址</p>
<p>目的IP地址，目的MAC地址：目的主机IP地址，网关的MAC地址（路由器响应接口的MAC地址）</p>
<p>若直接使用目的主机的MAC地址，子网中的适配器都不会将其传递到网络层，因为该帧的目的地址都不与子网中适配器的MAC地址匹配</p>
<p>具体过程：</p>
<ul>
<li>主机通过ARP获取通往目的子网的路由器与本地网相连端口的MAC地址，创建帧并将其放入子网中</li>
<li>路由器接收该帧，并将数据报交付给网络层，查询转发表，获取转发接口后，将数据转发到该接口</li>
<li>接口将数据报交付给其适配器，适配器将数据报封装到一个新的帧中，该帧的目的地址为最终目的地址的MAC地址（MAC地址通过ARP获得），同时源MAC地址为此时适配器的MAC地址</li>
</ul>
<h4 id="以太网"><a href="#以太网" class="headerlink" title="以太网"></a>以太网</h4><p>提供无连接、不可靠服务</p>
<h5 id="以太网帧结构"><a href="#以太网帧结构" class="headerlink" title="以太网帧结构"></a>以太网帧结构</h5><ul>
<li>数据字段 46-1500字节：以太网最大传输单元（MTU）为1500字节，数据段最小长度为46字节，如果不足需要填充</li>
<li>目的地址 6字节：目的适配器的MAC地址</li>
<li>源地址 6字节：传输该帧到LAN上的适配器的MAC地址</li>
<li>类型字段 2字节：允许以太网复用多种网络协议</li>
<li>循环冗余检测CRC 4字节：目的是使得接收适配器检测帧中是否进入了差错</li>
<li>前同步码 8字节：前七个字节为10101010，最后一个字节为10101011，用于唤醒接收适配器，同步其时钟与发送方时钟</li>
</ul>
<h5 id="CSMA-CD"><a href="#CSMA-CD" class="headerlink" title="CSMA/CD"></a>CSMA/CD</h5><p>以太网的多路访问协议</p>
<p>CSMA/CD机制：</p>
<ul>
<li>适配器可以在任何时刻开始传输，没有时隙概念</li>
<li>载波侦听：当适配器侦听到有其他适配器正在传输，不传输帧</li>
<li>碰撞检测：当传输中的适配器检测到有其他适配器正在传输，终止传输</li>
<li>重传前适配器等待一个随机时间，通常比传输一帧的时间短</li>
</ul>
<p>CSMA/CD工作方式：</p>
<ul>
<li>适配器从网络层得到一个数据报，准备一个以太网帧并放到适配器缓存区中</li>
<li>若适配器侦听到信道空闲，开始传输</li>
<li>传输过程中监视来自其他适配器的信号能量</li>
<li>如果检测到来自其他适配器的信号能量，停止传输</li>
<li>中止后适配器进入<strong>指数后退</strong>阶段，在该帧经受了n次连续碰撞后，适配器随机从{0,1,2,…,2^m-1}为K选择一个值，m=min{n,10}，适配器等待K*512比特时间，返回第二步（随机、指数增长的上界）</li>
</ul>
<h5 id="以太网效率"><a href="#以太网效率" class="headerlink" title="以太网效率"></a>以太网效率</h5><p>网线越长，效率越低</p>
<h4 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h4><p>交换机是即插即用设备</p>
<h5 id="交换机功能"><a href="#交换机功能" class="headerlink" title="交换机功能"></a>交换机功能</h5><ul>
<li><p>过滤：决定一个帧应该转发还是丢弃</p>
</li>
<li><p>转发：决定一个帧应该被导向哪个接口，并移动帧</p>
</li>
<li><p>借助交换机表完成，交换机表：</p>
<p>| MAC地址           | 到达节点的交换机接口 | 表项放置在表中的时间 |<br>| —————– | ——————– | ——————– |<br>| 62-FE-F7-11-89-A3 | 1                    | 9:32                 |</p>
</li>
</ul>
<h5 id="交换机工作过程"><a href="#交换机工作过程" class="headerlink" title="交换机工作过程"></a>交换机工作过程</h5><p>假定有目的地址DD-DD-DD-DD-DD-DD的帧从交换机接口x到达</p>
<ul>
<li>若表中没有DD-DD-DD-DD-DD-DD的表项，交换机广播该帧</li>
<li>若存在表项将DD-DD-DD-DD-DD-DD与接口x联系起来，交换机丢弃该帧（过滤功能）</li>
<li>若存在表项将DD-DD-DD-DD-DD-DD与接口y（!= x）联系起来，交换机将该帧转发到y接口，并将信息添加到表项中</li>
</ul>
<h5 id="自学习"><a href="#自学习" class="headerlink" title="自学习"></a>自学习</h5><ul>
<li>交换机表初始为空</li>
<li>对于接口收到的每个帧，交换机在其表中记录<ul>
<li>该帧源地址字段中的MAC地址</li>
<li>该帧到达的接口</li>
<li>当前的时间</li>
</ul>
</li>
<li>接下来一段时间（老化期）中，交换机没有接收到以该址为源地址的帧，则删除该地址</li>
</ul>
<h5 id="交换机的性质"><a href="#交换机的性质" class="headerlink" title="交换机的性质"></a>交换机的性质</h5><ul>
<li>消除碰撞</li>
<li>异质的链路：交换机将链路彼此隔离</li>
<li>管理</li>
</ul>
<h5 id="交换机和路由器的比较"><a href="#交换机和路由器的比较" class="headerlink" title="交换机和路由器的比较"></a>交换机和路由器的比较</h5><ul>
<li>由于交换机只需要查看二层数据帧 的头部即可决策转发地址，策略十分简单，可以直接通过硬件芯片实现相应功能，所以可以做到廉价高速，被大量应用在接入层。</li>
<li>而路由器由于需要处理跨网络的连接，必须在接收到完整的 IP数据包 后才能转发数据，路由协议又比较复杂，所以只能使用软件的方式实现相应的功能，要达到高性能只能付出更高的价格</li>
<li>交换机的优缺点<ul>
<li>优点：即插即用；具有相对高的分组过滤和转发速率</li>
<li>缺点：对广播风暴不提供保护措施</li>
</ul>
</li>
<li>路由器的优缺点<ul>
<li>优点：即使网络存在冗余路径，分组也不会通过路由器循环；对第二层的广播风暴提供了防火墙保护</li>
<li>缺点：非即插即用；处理时间较长</li>
</ul>
</li>
</ul>
<h4 id="PPP"><a href="#PPP" class="headerlink" title="PPP"></a>PPP</h4><p>高级数据链路控制协议（HDLC）</p>
<h5 id="PPP数据成帧"><a href="#PPP数据成帧" class="headerlink" title="PPP数据成帧"></a>PPP数据成帧</h5><ul>
<li>标志 1字节</li>
<li>地址 1字节</li>
<li>控制 1字节</li>
<li>协议 1或2字节</li>
<li>信息 可变长度</li>
<li>检验和 2或4字节</li>
<li>标志 1字节</li>
</ul>
<h4 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h4><p>局域网缺点</p>
<ul>
<li>缺乏流量隔离</li>
<li>交换机的无效使用</li>
<li>管理用户</li>
</ul>
<p>支持VLAN的交换机允许经一个单一的物理局域网基础设施定义多个虚拟局域网</p>
<h3 id="多协议标签交换MPLS"><a href="#多协议标签交换MPLS" class="headerlink" title="多协议标签交换MPLS"></a>多协议标签交换MPLS</h3><h4 id="MPLS首部"><a href="#MPLS首部" class="headerlink" title="MPLS首部"></a>MPLS首部</h4><p>标签、实验、S、TTL</p>
<h3 id="Web请求"><a href="#Web请求" class="headerlink" title="Web请求"></a>Web请求</h3><p>DHCP（UDP）、AQP、DNS（UDP）、HTTP、FTP</p>
<p>RIP/OSPF、BGP</p>
<p>详见PPT 或 课本p330</p>
<h4 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h4><ul>
<li>DHCP请求报文 生成UDP报文段 放入以太网帧 广播</li>
<li>被分解 CIDR分配地址 收到DHCPACK</li>
</ul>
<h4 id="ARP"><a href="#ARP" class="headerlink" title="ARP"></a>ARP</h4><ul>
<li>DNS查询报文</li>
<li>ARP查询报文查询网关路由器MAC地址</li>
<li>ARP回答，获取网关路由器的MAC地址</li>
</ul>
<h4 id="DNS-1"><a href="#DNS-1" class="headerlink" title="DNS"></a>DNS</h4><ul>
<li>网关路由器接收转发 通过域内协议和域间协议BGP</li>
<li>找到DNS源记录 查询权威DNS 生成DNS回答报文 放入UDP IP数据报 </li>
</ul>
<h4 id="TCP-1"><a href="#TCP-1" class="headerlink" title="TCP"></a>TCP</h4><ul>
<li>生成TCP套接字</li>
<li>三次握手：TCPSYN报文段 TCPSYNACK报文段</li>
</ul>
<h4 id="HTTP-1"><a href="#HTTP-1" class="headerlink" title="HTTP"></a>HTTP</h4><ul>
<li>HTTP请求 HTTP GET报文</li>
<li>服务器生成HTTP响应报文 放入请求内容 发送到TCP套接字</li>
<li>获取响应 渲染</li>
</ul>
<h2 id="无线网络"><a href="#无线网络" class="headerlink" title="无线网络"></a>无线网络</h2><h4 id="无线链路的特征（与有线区别）"><a href="#无线链路的特征（与有线区别）" class="headerlink" title="无线链路的特征（与有线区别）"></a>无线链路的特征（与有线区别）</h4><ul>
<li>递减的信号强度：电磁波在穿过物体时强度减弱</li>
<li>来自其他源的干扰：同一频段发送信号的电波源将相互干扰</li>
<li>多路径传播：走了不同长度的路径</li>
</ul>
<h4 id="信噪比"><a href="#信噪比" class="headerlink" title="信噪比"></a>信噪比</h4><p>收到的信号和噪声强度的相对测量，较大的SNR使接收方更容易提取传输的信号</p>
<h4 id="802-11MAC协议"><a href="#802-11MAC协议" class="headerlink" title="802.11MAC协议"></a>802.11MAC协议</h4><p>无线LAN采用随机访问协议：带碰撞避免的CSMA（CSMA/CA）</p>
<p>802.11使用链路层确认/重传（ARQ）机制</p>
<h5 id="802-11未实现碰撞检测"><a href="#802-11未实现碰撞检测" class="headerlink" title="802.11未实现碰撞检测"></a>802.11未实现碰撞检测</h5><ul>
<li>接收信号的强度通常远远小于发送信号的强度，构建具有检测碰撞能力的硬件代价较大</li>
<li>适配器会由于隐藏终端问题和衰减问题无法检测到所有的碰撞</li>
</ul>
<h5 id="802-11的CSMA-CA协议"><a href="#802-11的CSMA-CA协议" class="headerlink" title="802.11的CSMA/CA协议"></a>802.11的CSMA/CA协议</h5><ul>
<li>若初始时某站点监听到信道空闲，在一个分布式帧间间隔（DIFS）的短时间段后发送该帧</li>
<li>否则，选取一个随机回退值并且在侦听信道空闲时递减该值，侦听到信道忙时，计数值保持不变</li>
<li>当计数值减为0时（只可能发生在信道被侦听为空闲时），站点发送整个数据帧并等待确认</li>
<li>若果收到确认，发送站知道它的帧已经被目的站接收了</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">huangyt</p>
  <div class="site-description" itemprop="description">Blogs of learning CS</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/huangyt39" title="GitHub → https://github.com/huangyt39" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:huangyt39@163.com" title="E-Mail → mailto:huangyt39@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">huangyt</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
